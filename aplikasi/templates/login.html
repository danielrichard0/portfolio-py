{% extends 'base.html' %}

{% block head %}
{% endblock %}

{% block body %}
<div class="container-sm p-3">
    <!--{% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for message in messages %}
            <div class="alert alert-warning">
                {{ message[1] }}
            </div>
            {% endfor %}
        {% endif %}
    {% endwith %} -->
    <h1>Login User</h1>
    <form action="/login" method="POST">
        {{ form.csrf_token }}
        <div class="mb-3 form-group">
            {{ form.email.label(for="email") }}
            {% if form.email.errors %}
            {{ form.email(name="email",class="form-control is-invalid" ,style="cursor: pointer;",placeholder='kontolatoz@gmail.com') }}
            <div class="invalid-feedback">
                {% for error in form.email.errors %}
                <span>{{ error }}</span>                
                {% endfor %}
            </div>    
            {% else %}
            {{ form.email(class="form-control is-warning", style="cursor: pointer", placeholder='@gmail.com') }}
            {% endif %}
        </div>
        <div class="mb-3 form-group">
            {{ form.password.label(for='password') }}
            {% if form.password.errors %}
            {{ form.password(type="password", class="form-control is-invalid", style="cursor : pointer") }}
            <div class="invalid-feedback">
                {% for error in form.password.errors %}
                <span>{{ error }}</span>                
                {% endfor %}
            </div>
            {% else %}
            {{ form.password(type="password", class="form-control is-warning", style="cursor : pointer") }}
            {% endif %}
        </div>
        {{ form.remember(class="form-check-input" ,id="remember") }}{{form.remember.label(class="form-check-label", for='remember')}}
        <div class="mb-3 form-group">
            {{ form.submit(class="btn btn-primary") }}
        </div>        
    </form>
</div>

{% endblock %}

{% block customscript %}
<script type='text/javascript'>

    function loginUser() {
        const email = $("#emailInput").val()
        const password = $("#passwordInput").val()

        $.ajax({
            type: "POST",
            url: "{{url_for('login')}}",
            contentType: "application/json",
            data: JSON.stringify({
                email: email,
                password: password
            }),
            success: function(res) {
                console.log('success')
            },
            error: function(res) {
                console.log('gagal')
            }
        })
    }

</script>
{% endblock customscript %}